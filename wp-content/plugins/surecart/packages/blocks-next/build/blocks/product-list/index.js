!function(){"use strict";var e,t={7005:function(e,t,r){var n=r(1609),a=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var n,s={},u=null,i=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(i=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:u,ref:i,props:s,_owner:c.current}}},9255:function(e,t,r){e.exports=r(7005)},7632:function(e,t,r){var n=window.wp.blocks,a=window.wp.primitives,o=r(9255),c=(0,o.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(a.Path,{d:"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z",fillRule:"evenodd",clipRule:"evenodd"})}),l=window.wp.data,s=window.wp.element,u=window.wp.blockEditor,i=window.wp.i18n,p=window.wp.components;const d=[["core/group",{layout:{type:"flex",justifyContent:"space-between"},style:{spacing:{margin:{bottom:"10px"}}}},[["core/group",{layout:{type:"flex",flexWrap:"nowrap"}},[["surecart/product-list-sort",{}],["surecart/product-list-filter",{}]]],["surecart/product-list-search",{style:{layout:{selfStretch:"fixed",flexSize:"250px"}}}]]],["core/group",{layout:{type:"flex",flexWrap:"nowrap"},style:{spacing:{margin:{bottom:"10px"}}}},[["surecart/product-list-filter-tags",{layout:{type:"flex",orientation:"vertical"}}]]],["surecart/product-template",{style:{spacing:{blockGap:"30px"}},layout:{type:"grid",columnCount:4}}],["surecart/product-pagination"],["surecart/product-list-no-products",{},[["core/paragraph",{placeholder:(0,i.__)("Add text or blocks that will display when a query returns no products.","surecart"),align:"center",content:(0,i.__)("No products found.","surecart")}]]]];var m=window.wp.compose,_=window.wp.coreData,h=window.wp.htmlEntities;const f=e=>{const t=(0,l.useSelect)((t=>{const{getTaxonomies:r,getPostType:n}=t(_.store);return n(e)?.taxonomies?.length>0?r({type:e,per_page:-1}):[]}),[e]);return(0,s.useMemo)((()=>t?.filter((e=>{let{visibility:t}=e;return!!t?.publicly_queryable}))),[t])};function g(e,t,r){const a=(0,l.useSelect)((e=>e(n.store).getActiveBlockVariation(r,t)?.name),[t]),o=`${r}/${a}`;return(0,l.useSelect)((t=>{if(!a)return!1;const{getBlockRootClientId:r,getPatternsByBlockTypes:n}=t(u.store),c=r(e);return n(o,c).length>0}),[e,a,o])?o:r}const y=(e,t)=>(0,l.useSelect)((r=>{const{getBlockRootClientId:n,getPatternsByBlockTypes:a}=r(u.store),o=n(e);return a(t,o)}),[t,e]),b={order:"asc",_fields:"id,name",context:"view"},v=(e,t)=>{const r=t?.id||e?.find((e=>e.name===t))?.id;if(r)return r;const n=t.toLocaleLowerCase();return e?.find((e=>e.name.toLocaleLowerCase()===n))?.id};function w(e){let{onChange:t,query:r}=e;const{postType:n,taxQuery:a}=r,o=f(n);return o&&0!==o.length?React.createElement(p.__experimentalVStack,{spacing:4},o.map((e=>{const r=a?.[e.slug]||[];return React.createElement(R,{key:e.slug,taxonomy:e,termIds:r,onChange:r=>t({taxQuery:{...a,[e.slug]:r}})})}))):null}function R(e){let{taxonomy:t,termIds:r,onChange:n}=e;const[a,o]=(0,s.useState)(""),[c,u]=(0,s.useState)([]),[i,d]=(0,s.useState)([]),f=(0,m.useDebounce)(o,250),{searchResults:g,searchHasResolved:y}=(0,l.useSelect)((e=>{const{getEntityRecords:n,hasFinishedResolution:o}=e(_.store),c=["taxonomy",t.slug,{...b,search:a,orderby:"name",exclude:r,per_page:20}];return{searchResults:n(...c),searchHasResolved:o("getEntityRecords",c)}}),[a,r]),w=(0,l.useSelect)((e=>{if(!r?.length)return[];const{getEntityRecords:n}=e(_.store);return n("taxonomy",t.slug,{...b,include:r,per_page:r.length})}),[r]);return(0,s.useEffect)((()=>{if(r?.length||u([]),!w?.length)return;const e=r.reduce(((e,t)=>{const r=w.find((e=>e.id===t));return r&&e.push({id:t,value:r.name}),e}),[]);u(e)}),[r,w]),(0,s.useEffect)((()=>{y&&d(g.map((e=>e.name)))}),[g,y]),React.createElement(p.FormTokenField,{label:t.name,placeholder:t?.labels?.search_items,value:c,onFocus:()=>{f(a)},onInputChange:f,suggestions:i,displayTransform:h.decodeEntities,onChange:e=>{const t=new Set;for(const r of e){const e=v(g,r);e&&t.add(e)}d([]),n(Array.from(t))},__experimentalShowHowTo:!1,__nextHasNoMarginBottom:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0})}function x(e){let{onChange:t,query:r}=e;const[n,a]=(0,s.useState)(r.search),o=(0,s.useCallback)((0,m.debounce)((()=>{r.search!==n&&t({search:n})}),250),[n,r.search]);return(0,s.useEffect)((()=>(o(),o.cancel)),[n,o]),React.createElement(p.TextControl,{label:(0,i.__)("Keyword","surecart"),value:n,onChange:a,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}const k={order:"asc",_fields:"id,title",context:"view"},E=(e,t)=>{const r=t?.id||e?.find((e=>e?.title?.rendered===t))?.id;if(r)return r;const n=t.toLocaleLowerCase();return e?.find((e=>e?.title?.rendered.toLocaleLowerCase()===n))?.id};function S(e){let{query:{include:t},onChange:r}=e;const[n,a]=(0,s.useState)(""),[o,c]=(0,s.useState)([]),[u,d]=(0,s.useState)([]),f=(0,m.useDebounce)(a,250),{searchResults:g,searchHasResolved:y}=(0,l.useSelect)((e=>{const{getEntityRecords:r,hasFinishedResolution:a}=e(_.store),o=["postType","sc_product",{...k,search:n,orderby:"title",exclude:t,per_page:20}];return{searchResults:r(...o),searchHasResolved:a("getEntityRecords",o)}}),[n,t]),b=(0,l.useSelect)((e=>{if(!t?.length)return[];const{getEntityRecords:r}=e(_.store);return r("postType","sc_product",{...k,include:t,per_page:t.length})}),[t]);return(0,s.useEffect)((()=>{if(t?.length||c([]),!b?.length)return;const e=t.reduce(((e,t)=>{const r=b.find((e=>e.id===t));return r&&e.push({id:t,value:r?.title?.rendered}),e}),[]);c(e)}),[t,b]),(0,s.useEffect)((()=>{y&&d(g.map((e=>e?.title?.rendered)))}),[g,y]),React.createElement(p.FormTokenField,{label:(0,i.__)("Products","surecart"),value:o,onFocus:()=>{f(n)},onInputChange:f,suggestions:u,placeholder:(0,i.__)("Search for a product","surecart"),displayTransform:h.decodeEntities,onChange:e=>{const t=new Set;for(const r of e){const e=E(g,r);e&&t.add(e)}d([]),r({include:Array.from(t)})},__experimentalShowHowTo:!1,__nextHasNoMarginBottom:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0})}const C=[{label:(0,i.__)("Latest","surecart"),value:"date:desc"},{label:(0,i.__)("Oldest","surecart"),value:"date:asc"},{label:(0,i.__)("Alphabetical, A-Z","surecart"),value:"title:asc"},{label:(0,i.__)("Alphabetical, Z-A","surecart"),value:"title:desc"},{label:(0,i.__)("Price, low to high","surecart"),value:"price:asc"},{label:(0,i.__)("Price, high to low","surecart"),value:"price:desc"}];function P(e){let{onUpdateQuery:t,setAttributes:r,attributes:{type:n,query:a,query:{perPage:o,offset:c,taxQuery:l,order:s,orderBy:d}}}=e;const _=(0,m.useViewportMatch)("medium","<");return React.createElement(u.InspectorControls,null,React.createElement(p.PanelBody,{title:(0,i.__)("Attributes","surecart")},React.createElement(p.RangeControl,{label:(0,i.__)("Products Per Page","surecart"),value:o,onChange:e=>t({perPage:e}),step:1,min:1,max:40}),React.createElement(p.RangeControl,{label:(0,i.__)("Offset","surecart"),value:c,onChange:e=>t({offset:e}),step:1,min:0,max:100}),React.createElement(p.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i.__)("Default Sorting","surecart"),options:C,value:`${d}:${s}`,onChange:e=>{const r=e?.split(":");t({order:r[1],orderBy:r[0]})}})),React.createElement(p.PanelBody,{title:(0,i.__)("Products","surecart")},React.createElement(p.SelectControl,{label:(0,i.__)("Products To Show","surecart"),value:n,options:[{value:"all",label:(0,i.__)("All Products","surecart")},{value:"featured",label:(0,i.__)("Featured Products","surecart")},{value:"custom",label:(0,i.__)("Hand Pick Products","surecart")}],onChange:e=>r({type:e})}),"custom"===n&&React.createElement(S,{onChange:t,query:a})),React.createElement(p.__experimentalToolsPanel,{className:"block-library-query-toolspanel__filters",label:(0,i.__)("Filters","surecart"),resetAll:()=>{t({author:"",parents:[],search:"",taxQuery:null})},dropdownMenuProps:_?{}:{popoverProps:{placement:"left-start",offset:259}}},React.createElement(p.__experimentalToolsPanelItem,{label:(0,i.__)("Taxonomies","surecart"),hasValue:()=>Object.values(l||{}).some((e=>!!e.length)),onDeselect:()=>t({taxQuery:null})},React.createElement(w,{onChange:t,query:a})),React.createElement(p.__experimentalToolsPanelItem,{hasValue:()=>!!a.search,label:(0,i.__)("Keyword","surecart"),onDeselect:()=>t({search:null})},React.createElement(x,{onChange:t,query:a}))))}var B=e=>{let{openPatternSelectionModal:t,name:r,clientId:n}=e;const a=!!y(n,r).length;return React.createElement(React.Fragment,null,a&&React.createElement(p.ToolbarGroup,{className:"wp-block-template-part__block-control-group"},React.createElement(p.ToolbarButton,{onClick:t},(0,i.__)("Replace"))))};function T(e){let{setAttributes:t,attributes:r,attributes:{limit:n,ids:a,query:o,query:{perPage:c,include:l}},name:i,clientId:p,openPatternSelectionModal:m}=e;const _=e=>{t({query:{...o,...e}})};(0,s.useEffect)((()=>{_({perPage:n||c,include:a?.length?a:l}),t({limit:null})}),[n,a]);const h=(0,u.useBlockProps)(),f=(0,u.useInnerBlocksProps)(h,{template:d});return React.createElement(React.Fragment,null,React.createElement(P,{attributes:r,setAttributes:t,onUpdateQuery:_}),React.createElement(u.BlockControls,null,React.createElement(B,{name:i,clientId:p,openPatternSelectionModal:m})),React.createElement("div",f))}const I=[["surecart/product-template",{style:{spacing:{blockGap:"30px"}},layout:{type:"grid",columnCount:4}}],["surecart/product-pagination"],["surecart/product-list-no-products",{},[["core/paragraph",{placeholder:(0,i.__)("Add text or blocks that will display when a query returns no products.","surecart"),align:"center",content:(0,i.__)("No products found.","surecart")}]]]];function O(e){let{attributes:t,clientId:r,name:a,openPatternSelectionModal:o}=e;const{replaceInnerBlocks:c}=(0,l.useDispatch)(u.store),s=(0,u.useBlockProps)(),d=g(r,t,a),{blockType:m,activeBlockVariation:_,hasPatterns:h}=(0,l.useSelect)((e=>{const{getActiveBlockVariation:o,getBlockType:c}=e(n.store),{getBlockRootClientId:l,getPatternsByBlockTypes:s}=e(u.store),i=l(r);return{blockType:c(a),activeBlockVariation:o(a,t),hasPatterns:!!s(d,i).length}}),[a,d,r,t]),f=_?.icon?.src||_?.icon||m?.icon?.src,y=_?.title||m?.title;return React.createElement("div",s,React.createElement(p.Placeholder,{icon:f,label:y,instructions:(0,i.__)("Choose a pattern for the product list or start with a basic layout.")},!!h&&React.createElement(p.Button,{variant:"primary",onClick:o},(0,i.__)("Choose","surecart")),React.createElement(p.Button,{variant:"secondary",onClick:()=>{c(r,(0,n.createBlocksFromInnerBlocksTemplate)(I),!1)}},(0,i.__)("Start basic","surecart"))))}function q(e){let{clientId:t,attributes:r,setIsPatternSelectionModalOpen:a,name:o}=e;const[c,d]=(0,s.useState)(""),{replaceBlock:_,selectBlock:h}=(0,l.useDispatch)(u.store),f=(0,s.useMemo)((()=>({previewPostType:"sc_product"})),["sc_product"]),b=g(t,r,o),v=y(t,b),w=(0,s.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return e;const r=e.map((e=>[e,getPatternSearchRank(e,t)])).filter((e=>{let[,t]=e;return t>0}));return r.sort(((e,t)=>{let[,r]=e,[,n]=t;return n-r})),r.map((e=>{let[t]=e;return t}))}(v,c)),[v,c]),R=(0,m.useAsyncList)(w);return React.createElement(p.Modal,{overlayClassName:"block-library-query-pattern__selection-modal",title:(0,i.__)("Choose a pattern","surecart"),onRequestClose:()=>a(!1),isFullScreen:!0},React.createElement("div",{className:"block-library-query-pattern__selection-content"},React.createElement("div",{className:"block-library-query-pattern__selection-search"},React.createElement(p.SearchControl,{__nextHasNoMarginBottom:!0,onChange:d,value:c,label:(0,i.__)("Search for patterns","surecart"),placeholder:(0,i.__)("Search","surecart")})),React.createElement(u.BlockContextProvider,{value:f},React.createElement(u.__experimentalBlockPatternsList,{blockPatterns:w,shownPatterns:R,onClickPattern:(e,a)=>{const{newBlocks:c,queryClientIds:l}=((e,t,r)=>{const{namespace:a}=t,o=e.map((e=>(0,n.cloneBlock)(e))),c=[],l=[...o];for(;l.length>0;){const e=l.shift();e.name===r&&(a&&(e.attributes.namespace=a),c.push(e.clientId)),e.innerBlocks?.forEach((e=>{l.push(e)}))}return{newBlocks:o,queryClientIds:c}})(a,r,o);c[0]&&(c[0].attributes={...c[0].attributes,...r}),_(t,c),l[0]&&h(l[0])}}))))}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(null,arguments)}var F=JSON.parse('{"UU":"surecart/product-list"}');(0,n.registerBlockType)(F.UU,{icon:c,edit:e=>{const{clientId:t,attributes:r,name:n}=e,[a,o]=(0,s.useState)(!1),c=(0,l.useSelect)((e=>!!e(u.store).getBlocks(t).length),[t])?T:O;return React.createElement(React.Fragment,null,React.createElement(c,A({},e,{openPatternSelectionModal:()=>o(!0)})),a&&React.createElement(q,{clientId:t,attributes:r,setIsPatternSelectionModalOpen:o,name:n}))},save:function(){return React.createElement(u.InnerBlocks.Content,null)}})},1609:function(e){e.exports=window.React}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=function(t,r,a,o){if(!r){var c=1/0;for(i=0;i<e.length;i++){r=e[i][0],a=e[i][1],o=e[i][2];for(var l=!0,s=0;s<r.length;s++)(!1&o||c>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[s])}))?r.splice(s--,1):(l=!1,o<c&&(c=o));if(l){e.splice(i--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[r,a,o]},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={1131:0,8307:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,c=r[0],l=r[1],s=r[2],u=0;if(c.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var i=s(n)}for(t&&t(r);u<c.length;u++)o=c[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(i)},r=self.webpackChunk_surecart_blocks_next=self.webpackChunk_surecart_blocks_next||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var a=n.O(void 0,[8307],(function(){return n(7632)}));a=n.O(a)}();