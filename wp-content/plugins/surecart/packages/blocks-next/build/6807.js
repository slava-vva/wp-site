"use strict";(self.webpackChunk_surecart_blocks_next=self.webpackChunk_surecart_blocks_next||[]).push([[6807],{9505:function(t,e,o){o.d(e,{a:function(){return r},b:function(){return a},g:function(){return s},i:function(){return c}});var n=o(3792);const r=()=>["loading","busy","redirecting"].includes(n.s.loading),s=()=>{var t,e;return(null===(e=null===(t=null===n.s||void 0===n.s?void 0:n.s.checkout)||void 0===t?void 0:t.metadata)||void 0===e?void 0:e.success_url)||n.s.success_url||null},i=(t="seconds")=>{var e;const o=null===(e=n.s.checkout)||void 0===e?void 0:e.upsells_expire_at;if(!o)return null;const r=Date.now(),s=Math.floor((1e3*o-r)/1e3);return s<0?0:"seconds"===t?s:"minutes"===t?Math.floor(s/60):"hours"===t?Math.floor(s/60/60):void 0},u=t=>t<10?`0${t}`:`${t}`,a=()=>{var t;if(!(null===(t=n.s.checkout)||void 0===t?void 0:t.upsells_expire_at))return"--:--";const e=i("seconds"),o=Math.floor(e/86400),r=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return o>0?`${u(o)}:${u(r)}:${u(s)}:${u(a)}`:r>0?`${u(r)}:${u(s)}:${u(a)}`:`${u(s)}:${u(a)}`},c=()=>{const t=i();return null!==i()&&t<=0}},8110:function(t,e,o){o.d(e,{c:function(){return u}});var n=o(6892);const r=t=>!("isConnected"in t)||t.isConnected,s=((t,e)=>{let o;return(...t)=>{o&&clearTimeout(o),o=setTimeout((()=>{o=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(r))})(...t)}),2e3)}})(),i=t=>"function"==typeof t?t():t,u=(t,e)=>{const o=((t,e=((t,e)=>t!==e))=>{const o=i(t);let n=new Map(Object.entries(null!=o?o:{}));const r={dispose:[],get:[],set:[],reset:[]},s=()=>{var e;n=new Map(Object.entries(null!==(e=i(t))&&void 0!==e?e:{})),r.reset.forEach((t=>t()))},u=t=>(r.get.forEach((e=>e(t))),n.get(t)),a=(t,o)=>{const s=n.get(t);e(o,s,t)&&(n.set(t,o),r.set.forEach((e=>e(t,o,s))))},c="undefined"==typeof Proxy?{}:new Proxy(o,{get(t,e){return u(e)},ownKeys(t){return Array.from(n.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(t,e){return n.has(e)},set(t,e,o){return a(e,o),!0}}),l=(t,e)=>(r[t].push(e),()=>{((t,e)=>{const o=t.indexOf(e);o>=0&&(t[o]=t[t.length-1],t.length--)})(r[t],e)});return{state:c,get:u,set:a,on:l,onChange:(e,o)=>{const n=l("set",((t,n)=>{t===e&&o(n)})),r=l("reset",(()=>o(i(t)[e])));return()=>{n(),r()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(l("set",e.set)),e.get&&t.push(l("get",e.get)),e.reset&&t.push(l("reset",e.reset)),e.dispose&&t.push(l("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{r.dispose.forEach((t=>t())),s()},reset:s,forceUpdate:t=>{const e=n.get(t);r.set.forEach((o=>o(t,e,e)))}}})(t,e);return o.use((()=>{if("function"!=typeof n.g)return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const o=(0,n.g)();o&&((t,e,o)=>{const n=t.get(e);n?n.includes(o)||n.push(o):t.set(e,[o])})(t,e,o)},set:e=>{const o=t.get(e);o&&t.set(e,o.filter(n.f)),s(t)},reset:()=>{t.forEach((t=>t.forEach(n.f))),s(t)}}})()),o}},6807:function(t,e,o){o.r(e),o.d(e,{sc_upsell_countdown_timer:function(){return s}});var n=o(6892),r=o(9505);o(3792),o(8110);const s=class{constructor(t){(0,n.r)(this,t),this.timeRemaining=1/0,this.formattedTime=void 0,this.showIcon=!0}componentDidLoad(){this.updateCountdown()}updateCountdown(){this.formattedTime=(0,r.b)(),setInterval((()=>{this.formattedTime=(0,r.b)()}),1e3)}render(){return(0,n.h)(n.H,{key:"9a9efb0825555f64b0e1065138fe9358309b2a3b",role:"timer",class:{"sc-upsell-countdown-timer":!0}},this.showIcon&&(0,n.h)("sc-icon",{key:"cb68f938472b6955f5f7ed0105c5a8cada231e79",name:"clock"}),(0,n.h)("span",{key:"6c13e82c3709e2895d4617590de4e8ef6f27824a"},(0,n.h)("slot",{key:"b38c01b8b89ad649cbeaad2b7a6e63665a19aa72",name:"offer-expire-text"})," ",(0,n.h)("strong",{key:"af31554277d95a58c265f830045946ddbd1c19ed"},this.formattedTime)))}};s.style=":host{display:flex;justify-content:var(--sc-upsell-countdown-timer-justify-content, center);align-items:var(--sc-upsell-countdown-timer-align-items, center);text-align:var(--sc-upsell-countdown-timer-text-align, center);flex-wrap:wrap;gap:var(--sc-upsell-countdown-timer-gap, 0.5em);line-height:1;padding:var(--sc-upsell-countdown-timer-padding, var(--sc-spacing-medium));border-radius:var(--sc-upsell-countdown-timer-border-radius, var(--sc-border-radius-pill));background-color:var(--sc-upsell-countdown-timer-background-color, rgb(226, 249, 235));color:var(--sc-upsell-countdown-timer-color, rgb(71, 91, 80))}"},3792:function(t,e,o){o.d(e,{o:function(){return a},s:function(){return u}});var n=o(7499),r=o(8110);const{upsell:s}=(0,n.g)(),i=(0,r.c)({upsell:null,product:null,line_item:null,checkout_id:null,checkout:null,form_id:null,busy:!1,disabled:!1,success_url:null,text:{success:{title:"",description:"",button:""}},...s},((t,e)=>JSON.stringify(t)!==JSON.stringify(e))),{state:u,onChange:a,on:c,dispose:l,forceUpdate:d}=i},7499:function(t,e,o){o.d(e,{a:function(){return s},g:function(){return n},i:function(){return r}});const n=()=>{const t=document.querySelector('script[type="application/json"]#sc-store-data');if(!t)return{};try{const o=JSON.parse(t.textContent);if((e=o)&&"object"==typeof e&&!Array.isArray(e))return o;throw Error("Parsed state is not an object")}catch(t){console.error(t)}var e;return{}},r=(t,e,o,n)=>{var r,s,i,u,a;if(!(null==n?void 0:n.stock_enabled)||(null==n?void 0:n.allow_out_of_stock_purchases))return!1;if(1===t){const t=null===(i=(s=(null===(r=n.variants)||void 0===r?void 0:r.data)||[]).filter)||void 0===i?void 0:i.call(s,(t=>t.option_1===e));return Math.max(...t.map((t=>t.available_stock)))<=0}if(2===t){const t=((null===(u=n.variants)||void 0===u?void 0:u.data)||[]).filter((t=>(null==t?void 0:t.option_1)===o.option_1&&t.option_2===e));return Math.max(...t.map((t=>t.available_stock)))<=0}const c=((null===(a=n.variants)||void 0===a?void 0:a.data)||[]).filter((t=>(null==t?void 0:t.option_1)===o.option_1&&(null==t?void 0:t.option_2)===o.option_2&&t.option_3===e));return Math.max(...c.map((t=>t.available_stock)))<=0},s=(t,e,o,n)=>{var r,s,i;return 1===t?!((null===(r=null==n?void 0:n.variants)||void 0===r?void 0:r.data)||[]).some((t=>t.option_1===e)):2===t?!((null===(s=null==n?void 0:n.variants)||void 0===s?void 0:s.data)||[]).some((t=>(null==t?void 0:t.option_1)===o.option_1&&t.option_2===e)):!((null===(i=null==n?void 0:n.variants)||void 0===i?void 0:i.data)||[]).some((t=>(null==t?void 0:t.option_1)===o.option_1&&(null==t?void 0:t.option_2)===o.option_2&&t.option_3===e))}}}]);