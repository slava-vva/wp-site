import{h}from"@stencil/core";import{__,sprintf}from"@wordpress/i18n";import Swiper from"swiper";import{Navigation}from"swiper/modules";export class ScImageSlider{constructor(){this.images=void 0,this.thumbnails=[],this.hasThumbnails=void 0,this.thumbnailsPerPage=5,this.autoHeight=void 0,this.currentSliderIndex=0,this.imagesData=[],this.thumbnailsData=[]}handleThumbPaginate(){this.thumbsSwiper&&(this.currentSliderIndex>=this.thumbsSwiper.activeIndex&&this.currentSliderIndex<this.thumbsSwiper.activeIndex+this.thumbnailsPerPage||this.thumbsSwiper.slideTo(this.currentSliderIndex))}parseImages(e){e&&(this.imagesData="string"==typeof e?JSON.parse(e):e)}parseThumnails(e){e&&(this.thumbnailsData="string"==typeof e?JSON.parse(e):e)}componentWillLoad(){this.parseImages(this.images),this.parseThumnails(this.thumbnails)}componentDidUpdate(){this.swiper.update()}componentDidLoad(){this.swiperContainerRef&&(this.swiper=new Swiper(this.swiperContainerRef,{direction:"horizontal",loop:!1,autoHeight:this.autoHeight,centeredSlides:!0,on:{slideChange:e=>{this.currentSliderIndex=e.activeIndex}}})),this.swiperThumbsRef&&(this.thumbsSwiper=new Swiper(this.swiperThumbsRef,{modules:[Navigation],direction:"horizontal",loop:!1,slidesPerView:this.thumbnailsPerPage,slidesPerGroup:this.thumbnailsPerPage,spaceBetween:10,centerInsufficientSlides:!0,slideToClickedSlide:!0,navigation:{nextEl:this.next,prevEl:this.previous}}))}disconnectedCallback(){this.swiper.destroy(!0,!0),this.thumbsSwiper&&this.thumbsSwiper.destroy(!0,!0)}render(){var e,i,t;const s=(null===(e=this.thumbnailsData)||void 0===e?void 0:e.length)?this.thumbnailsData:this.imagesData;return h("div",{key:"4a270be345cc5d8cd76e600456de0d8eda4d2eb0",class:{"image-slider":!0,"image-slider--is-fixed-height":!this.autoHeight},part:"base"},h("div",{key:"ac89c5ad7c740da15cf404c99c38ba6e07deb865",class:"swiper",ref:e=>this.swiperContainerRef=e},h("div",{key:"06bb7e8e85aa3fbf4841aca51f327c6a7cdfaa60",class:"swiper-wrapper"},(this.imagesData||[]).map((({src:e,alt:i,srcset:t,width:s,height:a,sizes:r,title:n},l)=>h("div",{key:l,class:"swiper-slide image-slider__slider"},h("div",{class:"swiper-slide-img"},h("img",{src:e,alt:i,srcset:t,width:s,height:a,sizes:r,loading:l>0?"lazy":"eager",...n?{title:n}:{}}))))))),this.hasThumbnails&&h("div",{key:"ec98bd832290a4982b2c5558a8a6efa0783809fd",class:{"image-slider__thumbs":!0,"image-slider__thumbs--has-navigation":this.images.length>5}},h("button",{key:"1f3b294ce87800d2e7404625e6ed7c176fe676e1",disabled:null===(i=this.thumbsSwiper)||void 0===i?void 0:i.isBeginning,class:"image-slider__navigation image-slider--is-prev",ref:e=>this.previous=e},h("sc-visually-hidden",{key:"2f63c1886c0b837c94c3402df111c64f4a9035b5"},__("Go to previous product slide.","surecart")),h("sc-icon",{key:"c1da2bc2a572323749b46353542428671375f88c",name:"chevron-left","aria-hidden":"true","tab-index":"0"})),h("div",{key:"8e9aebcf6ba2fc35fce9446a51385f7d8f0452bc",class:"swiper",ref:e=>this.swiperThumbsRef=e},h("div",{key:"6ce30a7c62fab9aa93d88ac8db7d6ed5c50a26dd",class:"swiper-wrapper",role:"radiogroup","aria-label":sprintf(__("Products slide options section. There are %d options present.","surecart"),(null==s?void 0:s.length)||0)},(s||[]).map((({src:e,alt:i,srcset:t,width:s,height:a,sizes:r,title:n},l)=>h("button",{class:{"swiper-slide":!0,"image-slider__thumb":!0,"image-slider__thumb--is-active":this.currentSliderIndex===l},onClick:()=>{var e,i;return null===(i=null===(e=this.swiper)||void 0===e?void 0:e.slideTo)||void 0===i?void 0:i.call(e,l)},role:"radio","aria-checked":this.currentSliderIndex===l?"true":"false",tabindex:"0"},h("img",{src:e,alt:sprintf(__("Product image number %d, %s","sc-image-slider"),l+1,i),...n?{title:n}:{},srcset:t,width:s,height:a,sizes:r,loading:l>this.thumbnailsPerPage-1?"lazy":"eager"})))))),h("button",{key:"3b2863b99750eadbcbc3c53f5f97daa7503e2d9b",disabled:null===(t=this.thumbsSwiper)||void 0===t?void 0:t.isEnd,class:"image-slider__navigation image-slider--is-next",ref:e=>this.next=e},h("sc-visually-hidden",{key:"c05c9c416b1b68308ed4da573429225fe6332847"},__("Go to next product slide.","surecart")),h("sc-icon",{key:"a109d4a1d41985d80b536b7a540c34c97ecb305c",name:"chevron-right","aria-hidden":"true","tab-index":"0"}))))}static get is(){return"sc-image-slider"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-image-slider.scss"]}}static get styleUrls(){return{$:["sc-image-slider.css"]}}static get properties(){return{images:{type:"string",mutable:!1,complexType:{original:"string | { src: string; alt: string; srcset; width: number; height: number; sizes: string; title: string }[]",resolved:"string | { src: string; alt: string; srcset: any; width: number; height: number; sizes: string; title: string; }[]",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Accept a string or an array of objects"},attribute:"images",reflect:!1},thumbnails:{type:"string",mutable:!1,complexType:{original:"string | { src: string; alt: string; srcset; width: number; height: number; sizes: string; title: string }[]",resolved:"string | { src: string; alt: string; srcset: any; width: number; height: number; sizes: string; title: string; }[]",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"thumbnails",reflect:!1,defaultValue:"[]"},hasThumbnails:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"has-thumbnails",reflect:!1},thumbnailsPerPage:{type:"number",mutable:!1,complexType:{original:"number",resolved:"number",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"thumbnails-per-page",reflect:!1,defaultValue:"5"},autoHeight:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"auto-height",reflect:!1}}}static get states(){return{currentSliderIndex:{},imagesData:{},thumbnailsData:{}}}static get watchers(){return[{propName:"currentSliderIndex",methodName:"handleThumbPaginate"},{propName:"images",methodName:"parseImages"},{propName:"thumbnails",methodName:"parseThumnails"}]}}