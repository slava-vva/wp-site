import{r as e,h as i}from"./p-e97fde0a.js";import{a}from"./p-d9fa04f9.js";import{a as s}from"./p-401e165e.js";import"./p-d3366af3.js";const t=":host{display:block;position:relative}.customer-edit{display:grid;gap:0.75em}";const d=t;const n=class{constructor(i){e(this,i);this.heading=undefined;this.customer=undefined;this.successUrl=undefined;this.i18n=undefined;this.loading=undefined;this.error=undefined}async handleSubmit(e){var i;this.loading=true;try{const{email:t,first_name:d,last_name:n,phone:c,billing_matches_shipping:l,shipping_name:o,shipping_city:r,"tax_identifier.number_type":b,"tax_identifier.number":u,shipping_country:p,shipping_line_1:h,shipping_postal_code:f,shipping_state:_,billing_name:m,billing_city:y,billing_country:g,billing_line_1:v,billing_postal_code:k,billing_state:w}=await e.target.getFormJson();this.customer.billing_address={name:m,city:y,country:g,line_1:v,postal_code:k,state:w};this.customer.shipping_address={name:o,city:r,country:p,line_1:h,postal_code:f,state:_};await a({path:s(`surecart/v1/customers/${(i=this.customer)===null||i===void 0?void 0:i.id}`,{expand:["tax_identifier"]}),method:"PATCH",data:{email:t,first_name:d,last_name:n,phone:c,billing_matches_shipping:l===true||l==="on",shipping_address:this.customer.shipping_address,billing_address:this.customer.billing_address,...u&&b?{tax_identifier:{number:u,number_type:b}}:{}}});if(this.successUrl){window.location.assign(this.successUrl)}else{this.loading=false}}catch(e){this.error=(e===null||e===void 0?void 0:e.message)||wp.i18n.__("Something went wrong","surecart");this.loading=false}}render(){var e,a,s,t,d,n,c,l,o,r,b,u,p,h,f,_;return i("sc-dashboard-module",{key:"fc2a01e2655af832eae0188eebf5f219afd9a439",class:"customer-edit",error:this.error},i("span",{key:"eb2f50a85feef3ff2cf9bca75dda3db2fbd7ddbe",slot:"heading"},this.heading||wp.i18n.__("Update Billing Details","surecart")," ",!((e=this===null||this===void 0?void 0:this.customer)===null||e===void 0?void 0:e.live_mode)&&i("sc-tag",{key:"70ee58142547769f0c34661d3d51dce8aa8e8fc0",type:"warning",size:"small"},wp.i18n.__("Test","surecart"))),i("sc-card",{key:"1d8a0f9c01219824cca3d87113b1d8b1315bdc68"},i("sc-form",{key:"46da394161424b40d43566c140190993402a751f",onScFormSubmit:e=>this.handleSubmit(e)},i("sc-columns",{key:"4d7352b34c2efc69865feb4bd913d0c560b0ce9e",style:{"--sc-column-spacing":"var(--sc-spacing-medium)"}},i("sc-column",{key:"9b3c5580865c0557d30059562fbe63793c5b546e"},i("sc-input",{key:"458d46ce3ceb0f447ace3a00d911d54a4c16d1cb",label:wp.i18n.__("First Name","surecart"),name:"first_name",value:(a=this.customer)===null||a===void 0?void 0:a.first_name})),i("sc-column",{key:"aaa9e1ec4f8cc45f1df57c61053a01c491f27549"},i("sc-input",{key:"785440bae6877973ea81caec34be96a54c8b20f5",label:wp.i18n.__("Last Name","surecart"),name:"last_name",value:(s=this.customer)===null||s===void 0?void 0:s.last_name}))),i("sc-column",{key:"ceb011d7237897fd083b48a4d2b871b724141155"},i("sc-phone-input",{key:"43636b1bfa61abc8d1fffe024a25bcd2e0234fea",label:wp.i18n.__("Phone","surecart"),name:"phone",value:(t=this.customer)===null||t===void 0?void 0:t.phone})),i("sc-flex",{key:"c8fb6baa5adbd19bf006a4b29930373b74082d2a",style:{"--sc-flex-column-gap":"var(--sc-spacing-medium)"},flexDirection:"column"},i("div",{key:"a6b487ad38c6aba8c6801e1734c4d58b3b63dcce"},i("sc-address",{key:"ea38822db22e5303cc925ad378df5dfdbd8c5233",label:wp.i18n.__("Shipping Address","surecart"),showName:true,address:{...(d=this.customer)===null||d===void 0?void 0:d.shipping_address},required:false,names:{name:"shipping_name",country:"shipping_country",line_1:"shipping_line_1",line_2:"shipping_line_2",city:"shipping_city",postal_code:"shipping_postal_code",state:"shipping_state"},defaultCountryFields:((n=this.i18n)===null||n===void 0?void 0:n.defaultCountryFields)||[],countryFields:((c=this.i18n)===null||c===void 0?void 0:c.countryFields)||[]})),i("div",{key:"6b0af7282a092b773274e47976c2eced822659da"},i("sc-checkbox",{key:"efec6ff52047115297f8ec67854537315357d25e",name:"billing_matches_shipping",checked:(l=this.customer)===null||l===void 0?void 0:l.billing_matches_shipping,onScChange:e=>{this.customer={...this.customer,billing_matches_shipping:e.target.checked}},value:"on"},wp.i18n.__("Billing address is same as shipping","surecart"))),i("div",{key:"a31374770a9da201c4802a674c9c84d5a2b6c78e",style:{display:((o=this.customer)===null||o===void 0?void 0:o.billing_matches_shipping)?"none":"block"}},i("sc-address",{key:"d52a0b9ba7840f623533a45aa98e9b0b77713235",label:wp.i18n.__("Billing Address","surecart"),showName:true,address:{...(r=this.customer)===null||r===void 0?void 0:r.billing_address},names:{name:"billing_name",country:"billing_country",line_1:"billing_line_1",line_2:"billing_line_2",city:"billing_city",postal_code:"billing_postal_code",state:"billing_state"},required:true,defaultCountryFields:((b=this.i18n)===null||b===void 0?void 0:b.defaultCountryFields)||[],countryFields:((u=this.i18n)===null||u===void 0?void 0:u.countryFields)||[]})),i("sc-tax-id-input",{key:"c08582893cb644fdcd07e93728a1c78b2d66b670",show:true,number:(h=(p=this.customer)===null||p===void 0?void 0:p.tax_identifier)===null||h===void 0?void 0:h.number,type:(_=(f=this.customer)===null||f===void 0?void 0:f.tax_identifier)===null||_===void 0?void 0:_.number_type})),i("div",{key:"0a3d94aab2a00b8ecafa6f15a077dbd47017bfb7"},i("sc-button",{key:"87d72bde353879db1951d8a1247f7a2b0d7fda7d",type:"primary",full:true,submit:true},wp.i18n.__("Save","surecart"))))),this.loading&&i("sc-block-ui",{key:"946a72ea0cf8ef464bf258b255ac8466c2c2f973",spinner:true}))}};n.style=d;export{n as sc_customer_edit};
//# sourceMappingURL=p-41215d66.entry.js.map