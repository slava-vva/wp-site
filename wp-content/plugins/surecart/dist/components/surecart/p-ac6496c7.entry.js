import{r as e,c as t,h as a,a as r}from"./p-e97fde0a.js";import{u as s,s as n}from"./p-53e7f7d7.js";import{d as o}from"./p-85586e39.js";import{c as i,s as d}from"./p-1f60f497.js";import{c}from"./p-2879e1b7.js";import{s as l,g as h,b as f,a as p}from"./p-94f536d6.js";import{g as u}from"./p-5c1a03e5.js";import"./p-03631502.js";import"./p-9dbc54d6.js";import"./p-d3366af3.js";import"./p-401e165e.js";import"./p-830ab1a3.js";import"./p-ec182234.js";import"./p-3f6362a4.js";import"./p-95325ec5.js";import"./p-4df6e0c5.js";import"./p-d9fa04f9.js";const m=class{constructor(a){e(this,a);this.scSetState=t(this,"scSetState",7)}handleUpdateSession(e){const{data:t,options:a}=e.detail;if(a===null||a===void 0?void 0:a.silent){this.update(t)}else{this.loadUpdate(t)}}handleErrorResponse(e){var t,a;if((e===null||e===void 0?void 0:e.code)==="readonly"||((a=(t=e===null||e===void 0?void 0:e.additional_errors)===null||t===void 0?void 0:t[0])===null||a===void 0?void 0:a.code)==="checkout.customer.account_mismatch"){c()}if((e===null||e===void 0?void 0:e.code)==="rest_cookie_invalid_nonce"){s("EXPIRE");return}if(e===null||e===void 0?void 0:e.message){i(e)}if((e===null||e===void 0?void 0:e.code)==="http_request_failed"){i(wp.i18n.__("Something went wrong. Please reload the page and try again.","surecart"))}}async fetch(e={}){this.loadUpdate({status:"draft",...e})}async update(e={},t={}){var a;try{n.checkout=await o({id:(a=n.checkout)===null||a===void 0?void 0:a.id,data:{...e},query:{...t}})}catch(e){console.error(e);throw e}}async loadUpdate(e={}){try{s("FETCH");await this.update(e);s("RESOLVE")}catch(e){s("REJECT");this.handleErrorResponse(e)}}render(){return a("sc-line-items-provider",{key:"4dda79c598a800ae12f388ccfafb4f9cd1dc854a",order:n.checkout,onScUpdateLineItems:e=>this.loadUpdate({line_items:e.detail})},a("slot",{key:"b7e4a92273cf7dc6e0d80a9f0d6e2dc6eb8aec86"}))}get el(){return r(this)}};const w=":host {\n  display: contents;\n}\n.drawer {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n  font-family: var(--sc-font-sans);\n  font-weight: var(--sc-font-weight-normal);\n}\n.drawer--contained {\n  position: absolute;\n  z-index: initial;\n}\n.drawer--fixed {\n  position: fixed;\n  z-index: var(--sc-z-index-drawer);\n}\n.drawer__panel {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  z-index: 2;\n  max-width: 100%;\n  max-height: 100%;\n  background-color: var(--sc-panel-background-color);\n  box-shadow: var(--sc-shadow-x-large);\n  transition: var(--sc-transition-medium) transform;\n  overflow: auto;\n  pointer-events: all;\n}\n.drawer__panel:focus {\n  outline: none;\n}\n.drawer--top .drawer__panel {\n  top: 0;\n  right: auto;\n  bottom: auto;\n  left: 0;\n  width: 100%;\n  height: var(--sc-drawer-size, 400px);\n}\n.drawer--end .drawer__panel {\n  top: 0;\n  right: 0;\n  bottom: auto;\n  left: auto;\n  width: 100%;\n  max-width: var(--sc-drawer-size, 400px);\n  height: 100%;\n}\n.drawer--bottom .drawer__panel {\n  top: auto;\n  right: auto;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: var(--sc-drawer-size, 400px);\n}\n.drawer--start .drawer__panel {\n  top: 0;\n  right: auto;\n  bottom: auto;\n  left: 0;\n  width: var(--sc-drawer-size, 400px);\n  height: 100%;\n}\n.header__sticky {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: #fff;\n}\n.drawer__header {\n  display: flex;\n  align-items: center;\n  padding: var(--sc-drawer-header-spacing);\n  border-bottom: var(--sc-drawer-border);\n}\n\n.drawer__title {\n  flex: 1 1 auto;\n  font: inherit;\n  font-size: var(--sc-font-size-large);\n  line-height: var(--sc-line-height-dense);\n  margin: 0;\n}\n.drawer__close {\n  flex: 0 0 auto;\n  display: flex;\n  align-items: center;\n  font-size: var(--sc-font-size-x-large);\n  color: var(--sc-color-gray-500);\n  cursor: pointer;\n}\n.drawer__body {\n  flex: 1 1 auto;\n}\n\n.drawer--has-footer .drawer__footer {\n  border-top: var(--sc-drawer-border);\n  padding: var(--sc-drawer-footer-spacing);\n\n  &.is-sticky {\n    position: sticky;\n    bottom: 0;\n    background: #fff;\n  }\n}\n\n.drawer__overlay {\n  display: block;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: var(--sc-overlay-background-color);\n  pointer-events: all;\n}\n.drawer--contained .drawer__overlay {\n  position: absolute;\n}\n";const y=w;const b=class{constructor(a){e(this,a);this.scInitialFocus=t(this,"scInitialFocus",7);this.scRequestClose=t(this,"scRequestClose",7);this.scShow=t(this,"scShow",7);this.scHide=t(this,"scHide",7);this.scAfterShow=t(this,"scAfterShow",7);this.scAfterHide=t(this,"scAfterHide",7);this.open=false;this.label="";this.placement="end";this.contained=false;this.noHeader=false;this.stickyHeader=false;this.stickyFooter=false}componentDidLoad(){this.drawer.hidden=!this.open;if(this.open&&!this.contained){this.lockBodyScrolling()}this.handleOpenChange()}disconnectedCallback(){this.unLockBodyScrolling()}lockBodyScrolling(){document.body.classList.add("sc-scroll-lock")}unLockBodyScrolling(){document.body.classList.remove("sc-scroll-lock")}async show(){if(this.open){return undefined}this.open=true}async hide(){if(!this.open){return undefined}this.open=false}async requestClose(e="method"){const t=this.scRequestClose.emit(e);if(t.defaultPrevented){const e=h(this.el,"drawer.denyClose");f(this.panel,e.keyframes,e.options);return}this.hide()}handleKeyDown(e){if(e.key==="Escape"){e.stopPropagation();this.requestClose("keyboard")}}async handleOpenChange(){if(this.open){this.scShow.emit();this.originalTrigger=document.activeElement;if(!this.contained){this.lockBodyScrolling()}const e=this.el.querySelector("[autofocus]");if(e){e.removeAttribute("autofocus")}await Promise.all([p(this.drawer),p(this.overlay)]);this.drawer.hidden=false;requestAnimationFrame((()=>{const t=this.scInitialFocus.emit();if(!t.defaultPrevented){if(e){e.focus({preventScroll:true})}else{this.panel.focus({preventScroll:true})}}if(e){e.setAttribute("autofocus","")}}));const t=h(this.el,`drawer.show${this.placement.charAt(0).toUpperCase()+this.placement.slice(1)}`);const a=h(this.el,"drawer.overlay.show");await Promise.all([f(this.panel,t.keyframes,t.options),f(this.overlay,a.keyframes,a.options)]);this.scAfterShow.emit()}else{this.scHide.emit();this.unLockBodyScrolling();await Promise.all([p(this.drawer),p(this.overlay)]);const e=h(this.el,`drawer.hide${this.placement.charAt(0).toUpperCase()+this.placement.slice(1)}`);const t=h(this.el,"drawer.overlay.hide");await Promise.all([f(this.panel,e.keyframes,e.options),f(this.overlay,t.keyframes,t.options)]);this.drawer.hidden=true;const a=this.originalTrigger;if(typeof(a===null||a===void 0?void 0:a.focus)==="function"){setTimeout((()=>a.focus()))}this.scAfterHide.emit()}}render(){return a("div",{key:"b8564214c01f26bb688cdf738fd60a993b03dda3",part:"base",class:{drawer:true,"drawer--open":this.open,"drawer--top":this.placement==="top","drawer--end":this.placement==="end","drawer--bottom":this.placement==="bottom","drawer--start":this.placement==="start","drawer--contained":this.contained,"drawer--fixed":!this.contained,"drawer--has-footer":this.el.querySelector('[slot="footer"]')!==null},ref:e=>this.drawer=e,onKeyDown:e=>this.handleKeyDown(e)},a("div",{key:"8d7657a1807c807d76bea412211e75184fe12527",part:"overlay",class:"drawer__overlay",onClick:()=>this.requestClose("overlay"),tabindex:"-1",ref:e=>this.overlay=e}),a("div",{key:"4040e14c873067605360ab8413fe516924af6348",part:"panel",class:"drawer__panel",role:"dialog","aria-modal":"true","aria-hidden":this.open?"false":"true","aria-label":this.noHeader?this.label:undefined,"aria-labelledby":!this.noHeader?"title":undefined,tabindex:"0",ref:e=>this.panel=e},!this.noHeader&&a("header",{key:"35189c042f906a847ccfd20ea650442400f4f78c",part:"header",class:this.stickyHeader?"header__sticky":""},a("slot",{key:"6eaa35f051c933c1b58a97ff3f9c66d0459d89e0",name:"header"},a("div",{key:"abf5d36b8edbc393f7ea95aee02aafbbe00a972d",class:"drawer__header"},a("h2",{key:"0819e0aaeeef9c57791369e64897817bf86313ae",part:"title",class:"drawer__title",id:"title"},a("slot",{key:"06b59d7d5eca26490ed5df55f22687037eb9e3e4",name:"label"},this.label.length>0?this.label:" "," ")),a("sc-icon",{key:"e6cb9815f042f0f53b6a43d94b81f9ecc13ffa98",part:"close-button",exportparts:"base:close-button__base",class:"drawer__close",name:"x",label:wp.i18n.__("Close","surecart"),onClick:()=>this.requestClose("close-button")})))),a("footer",{key:"95d365ce6776aa92cd0e53cb7de6f4213ed2a3d4",part:"header-suffix",class:"drawer__header-suffix"},a("slot",{key:"53b605453bdf6b265d752ff2c6a9aeab028dc813",name:"header-suffix"})),a("div",{key:"033c18dd462135334303b8659c9fd47afed36b1c",part:"body",class:"drawer__body"},a("slot",{key:"6ba85f4f0fd9eb748840c49c7955a64e6f2b12d1"})),a("footer",{key:"d9e729dfcafb1474e4e76546337135806e21f88f",part:"footer",class:this.stickyFooter?"drawer__footer is-sticky":"drawer__footer"},a("slot",{key:"c3b003dd9b177e28fa09a9d4cb8e37d6ccc58c8c",name:"footer"}))))}get el(){return r(this)}static get watchers(){return{open:["handleOpenChange"]}}};l("drawer.showTop",{keyframes:[{opacity:0,transform:"translateY(-100%)"},{opacity:1,transform:"translateY(0)"}],options:{duration:250,easing:"ease"}});l("drawer.hideTop",{keyframes:[{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(-100%)"}],options:{duration:250,easing:"ease"}});l("drawer.showEnd",{keyframes:[{opacity:0,transform:"translateX(100%)"},{opacity:1,transform:"translateX(0)"}],options:{duration:250,easing:"ease"}});l("drawer.hideEnd",{keyframes:[{opacity:1,transform:"translateX(0)"},{opacity:0,transform:"translateX(100%)"}],options:{duration:250,easing:"ease"}});l("drawer.showBottom",{keyframes:[{opacity:0,transform:"translateY(100%)"},{opacity:1,transform:"translateY(0)"}],options:{duration:250,easing:"ease"}});l("drawer.hideBottom",{keyframes:[{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(100%)"}],options:{duration:250,easing:"ease"}});l("drawer.showStart",{keyframes:[{opacity:0,transform:"translateX(-100%)"},{opacity:1,transform:"translateX(0)"}],options:{duration:250,easing:"ease"}});l("drawer.hideStart",{keyframes:[{opacity:1,transform:"translateX(0)"},{opacity:0,transform:"translateX(-100%)"}],options:{duration:250,easing:"ease"}});l("drawer.denyClose",{keyframes:[{transform:"scale(1)"},{transform:"scale(1.01)"},{transform:"scale(1)"}],options:{duration:250}});l("drawer.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250,easing:"ease"}});l("drawer.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250,easing:"ease"}});b.style=y;const v=class{constructor(a){e(this,a);this.scUpdateError=t(this,"scUpdateError",7);this.error=undefined}handleErrorUpdate(e){this.scUpdateError.emit(e)}render(){return!!(d===null||d===void 0?void 0:d.message)?a("sc-alert",{exportparts:"base, icon, text, title, message, close",type:"danger",scrollOnOpen:true,open:!!(d===null||d===void 0?void 0:d.message),closable:!!(d===null||d===void 0?void 0:d.dismissible)},(d===null||d===void 0?void 0:d.message)&&a("span",{slot:"title",innerHTML:d.message}),(u()||[]).map(((e,t)=>a("div",{innerHTML:e,key:t})))):null}static get watchers(){return{error:["handleErrorUpdate"]}}};export{m as sc_cart_session_provider,b as sc_drawer,v as sc_error};
//# sourceMappingURL=p-ac6496c7.entry.js.map